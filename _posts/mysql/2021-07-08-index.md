---
layout: post
title: Mysql 之——索引
categories: [cate1, cate2]
description: Mysql 之——索引
keywords: keyword1, keyword2
mermaid: true
---

索引是任何数据库中都十分**重要**的一个技术点。

索引是放在磁盘的，是持久化的数据。<br>
只是在使用的时候为了加快速度加载到内存。

## 索引面试题

- 索引是帮助 MySQL 高效获取数据的数据结构
- 索引存储在文件系统中
- 索引的文件存储形式与存储引擎有关
- 索引文件的结构
	- hash
	- 二叉树
	- B树
	- B+树

B+树的优势在哪儿？
- hash 表
	- hash 表适用于等值查询，而业务中更多的是范围查询。
	- hash 表在使用的时候需要把全部的数据加载到内存，比较耗费内存空间。

树
在树的结构中，左子树的值小于根节点，根节点小于右子树，多叉树从左到右是有序的

```mermaid!
graph LR;
A[多叉树] --> B[二叉树] 
B --> C[AVL树]
```

不同的数据引擎，数据文件和索引文件存放的位置是不同的，因此有了分类
- 聚簇索引
	- 数据和文件放在一起<br>
		InnoDB<br>
		
		| 文件后缀 | 文件内容 |
		| :----: | :----: |
		| .frm | 表结构 |
		| .idb | 数据和索引 |


- 非聚簇索引
	- 数据和索引单独一个文件<br>
		MyISAM<br>
		
		| 文件后缀 | 文件内容 |
		| :----: | :----: |
		| .frm | 表结构 |
		| .myi | 索引 |
		| .myd | 数据 |



一般情况下找不到 .idb文件，因为 mysql 默认使用 innodb ，其中默认把所有的数据和索引存放在同一个文件中

打开 mysql 命令行，输入
```
show variables like 'innodb_file_per_table';
```
```
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| innodb_file_per_table | OFF   |
+-----------------------+-------+
```
这个参数的意思是要不要给innodb中的每一个表建立单独的文件，可以看到是 off ，也就是不

set global innodb_file_per_table=off;




## 源码链接
该文章源码链接 [Github](url)